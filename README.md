# forecasting_guides_dynamic_decisions
 Code for the manuscript "Probabilistic forecasting guides dynamic decisions". The authors are Shuze Liu, Yang Xiang, and Samuel J. Gershman. 

- **Bold** words are .py, .ipynb, and .sh filenames.
- *Italicized* words are .csv and .pickle filenames or directory folder names.

The code runs on Python 3.9.5 and Numpy 2.0.2.

## Online experiments
- Experiment 1: https://gershmanlab.com/experiments/shuze/learning_curves/exp1.html
- Experiment 2a: https://gershmanlab.com/experiments/shuze/learning_curves/exp2_variant0.html
- Experiment 2b: https://gershmanlab.com/experiments/shuze/learning_curves/exp2_variant1.html
- Experiment 3: https://gershmanlab.com/experiments/shuze/learning_curves/exp3.html

## *Experiment* folder
- It contains the Javascript code for the experiment links above.

## Analysis folder
- **manuscript_allfigures_final.ipynb** creates all figures for the manuscript, based on the human data and the saved model fit files.
- **exps_rawdataload.ipynb** converts raw, participant-specific datafiles to files seen in the *data* subfolder. 
- **exp1_modelfits.ipynb** fits models to Experiment 1 human data.
- **exp2_modelfits.ipynb** fits models to Experiment 2 human data.
- **exp3.py** fits models to Experiment 3 human data. **exp3.sh** and **exp3_cv.sh** call upon it to perform the usual model fits and cross-validation fits respectively.
- **exp3_cv_modelrecov.py** fits models to Experiment 3 fake data. **exp3_cv_modelrecov.sh** calls upon it to perform cross-validation fits for model recovery.
- **exp3_modelrecoveryresultssave.ipynb** generates fake datasets based on Experiment 3 fitted models, to be used for model recovery. It also analyzes the model recovery fits for Experiment 3, producing model predictions and saving them. 

### *data* subfolder
- It contains raw human data for each experiment, in both .csv and .pickle formats.

### *fig* subfolder
- It contains all figures generated by **manuscript_allfigures_final.ipynb** above.

### *model_fits* subfolder
- It contains saved files for model fits, cross-validation model fits, model recovery fits, and predictions generated by the fitted models.
